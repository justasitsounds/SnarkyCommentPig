/* raphael-svg-import-classic - v0.2.0 - 2013-08-11 */
Raphael.fn.importSVG=function(a){"use strict";var b=this.set(),c={},d={"text-anchor":"start"};this.parseElement=function(a){if(3!==a.nodeType){var e,f,g={stroke:"transparent","stroke-width":0,fill:"#000"};if(a.attributes)for(e=0,f=a.attributes.length;f>e;e++)g[a.attributes[e].name]=a.attributes[e].value;var h,i=a.nodeName;switch(i){case"svg":case"g":var j=a.getAttribute("id"),k=a.getAttribute("class");if(j||k){var l=a.childNodes;for(e=0,f=l.length;f>e;e++){var m=l[e];3!==m.nodeType&&(j&&m.setAttribute("data-svg-group",j),k&&m.setAttribute("class",(m.getAttribute("class")||"")+" "+k))}}var n=this.set();for(e=0,f=a.childNodes.length;f>e;e++)n.push(this.parseElement(a.childNodes.item(e)));if(g.transform){var o=/translate\(([^,]+),([^,]+)\)/.exec(g.transform);3==o.length&&n.translate(o[1],o[2])}return"none"===g.display&&n.hide(),j&&a.childNodes.length&&(c[j]=n),void 0;case"rect":g.rx&&g.ry?(g.r=(+(g.rx||0)+ +(g.ry||0))/2,delete g.rx,delete g.ry):(g.r=g.rx||g.ry||0,delete g.rx,delete g.ry);case"circle":case"ellipse":h=this[i]();break;case"path":h=this.path(g.d),delete g.d;break;case"polygon":h=this.polygon(g);break;case"polyline":h=this.polyline(g);break;case"line":h=this.line(g);break;case"image":h=this.image();break;case"text":for(var p in d)!g[p]&&d.hasOwnProperty(p)&&(g[p]=d[p]);h=this.text(g.x,g.y,a.text||a.textContent);break;default:var q=a.getElementsByTagName("svg");return q.length&&(q[0].normalize(),this.parseElement(q[0])),void 0}var r=g.transform;if(r){r=r.substring(7,r.length-1).split(" ").map(function(a){return parseFloat(a)});var s=h.matrix;s.add.apply(s,r),h.transform(s.toTransformString()),delete g.transform}h.attr(g);var t=a.getAttribute("class");t&&h.node.setAttribute("class",(h.node.getAttribute("class")||"")+" "+t),h.node.setAttribute("data-svg",i);var u=a.getAttribute("data-svg-group");u&&h.node.setAttribute("data-svg-group",u);var v=a.getAttribute("id");return v&&(h.node.id=v),b.push(h),h}},this.parseElement(a);var e=Function.prototype.bind&&Array.prototype.forEach?Function.prototype.call.bind(Array.prototype.forEach):function(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c,a)},f=this;e(a.getElementsByTagName("style"),function(a){var b=document.createElement("style"),c=a.textContent||a.text;b.type="text/css",document.head.appendChild(b);var d;b.styleSheet?(b.styleSheet.cssText=c,d=b.styleSheet.rules):(b.appendChild(document.createTextNode(c)),d=b.sheet.cssRules),e(d,function(a){var b=a.style,c=document.querySelectorAll(a.selectorText),d={};for(var g in Raphael._availableAttrs){var h=b[g];h&&(d[g]="number"==typeof Raphael._availableAttrs[g]?parseFloat(h):h)}e(c,function(a){f.getById(a.raphaelid).attr(d)})})});var g,h=!1;for(g in c){h=!0;break}return h&&(b.groups=c),b},Raphael.fn.line=function(a){var b=["M",a.x1,a.y1,"L",a.x2,a.y2,"Z"];return delete a.x1,delete a.y1,delete a.x2,delete a.y2,this.path(b)},Raphael.fn.polygon=function(a){for(var b=a.points,c=["M"],d=b.split(" "),e=0;e<d.length;e++){for(var f=d[e].split(","),g=0;g<f.length;g++){var h=parseFloat(f[g]);isNaN(h)||c.push(h)}0===e&&c.push("L")}return c.push("Z"),delete a.points,this.path(c)},Raphael.fn.polyline=function(a){for(var b=a.points,c=["M"],d=b.split(" "),e=0;e<d.length;e++){for(var f=d[e].split(","),g=0;g<f.length;g++){var h=parseFloat(f[g]);isNaN(h)||c.push(h)}0===e&&c.push("L")}return delete a.points,this.path(c)};